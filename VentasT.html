<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resumen de Ventas</title>
    <link rel="stylesheet" href="VentasStyles.css">
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>

<body>
    <div class="buttons-container">
        <div class="buttons">
            <p>üçóüçó</p>
            <div class="button-container">
                <button>
                    <a href="Ticket.html"><img src="LOGO POLLO O.png" width="10%" alt="TICKET" /></a>
                </button>
            </div>
            <p>üçóüçó</p>
            <div class="button-container">
                <button>
                    <a href="Ticket didi.html"><img src="LOGO DIDI.png" width="10%" alt="DIDI" /></a>
                </button>
            </div>
            <p>üçóüçó</p>
            <div class="button-container">
                <button>
                    <a href="Ticket rappi.html"><img src="LOGO RAPPI.jpg" width="10%" alt="RAPPI" /></a>
                </button>
            </div>
            <p>üçóüçó</p>
            <div class="button-container">
                <button>
                    <a href="Ticket uber.html"><img src="LOGO UBER.png" width="10%" alt="UBER" /></a>
                </button>
            </div>
            <p>üçóüçó</p>
            <div class="button-container">
                <button>
                    <a href="VentasT.html"><img src="LOGO CAJA.png" width="10%" alt="CAJA" /></a>
                </button>
            </div>
            <p>üçóüçó</p>
            <!-- Campo de selecci√≥n de fecha -->
            <label for="fechaSelect">Seleccionar Fecha:</label>
            <input type="date" id="fechaSelect" onchange="filtrarVentasPorFecha()" />

            <h2>Resumen de Ventas Diarias</h2>

            <!-- Tabla Resumida de Ventas del D√≠a -->
            <table id="resumenVentas">
                <thead>
                    <tr>
                        <th>Tipo de Pago</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Efectivo</td>
                        <td id="totalEfectivo">$0.00</td>
                    </tr>
                    <tr>
                        <td>D√©bito</td>
                        <td id="totalDebito">$0.00</td>
                    </tr>
                    <tr>
                        <td>Cr√©dito</td>
                        <td id="totalCredito">$0.00</td>
                    </tr>
                    <tr>
                        <td>Vale de Despensa</td>
                        <td id="totalVale">$0.00</td>
                    </tr>
                    <tr>
                        <th>Total del D√≠a</th>
                        <th id="totalDia">$0.00</th>
                    </tr>
                </tbody>
            </table>

            <button onclick="elegirFecha()">Ver Ventas de Otro D√≠a</button>

            <h2>Todas las Ventas</h2>

            <!-- Tabla de Ventas Detalladas -->
            <table id="todasVentas">
                <thead>
                    <tr>
                        <th>Sucursal</th>
                        <th>N√∫mero de Ticket</th>
                        <th>Atendi√≥</th>
                        <th>M√©todo de Pago</th>
                        <th>Total de Venta</th>
                        <th>Detalle</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Aqu√≠ se agregar√°n las ventas -->
                </tbody>
            </table>

            <script>
                function cargarVentas() {
                    // Obtener las ventas guardadas desde localStorage
                    const ventas = JSON.parse(localStorage.getItem("ventas")) || [];

                    const resumen = {
                        efectivo: 0,
                        debito: 0,
                        credito: 0,
                        vale: 0,
                        total: 0
                    };

                    ventas.forEach(venta => {
                        switch (venta.metodoPago) {
                            case 'efectivo':
                                resumen.efectivo += venta.total;
                                break;
                            case 'debito':
                                resumen.debito += venta.total;
                                break;
                            case 'credito':
                                resumen.credito += venta.total;
                                break;
                            case 'vale':
                                resumen.vale += venta.total;
                                break;
                        }
                        resumen.total += venta.total;
                    });

                    // Actualizar la tabla resumida
                    document.getElementById('totalEfectivo').textContent = `$${resumen.efectivo.toFixed(2)}`;
                    document.getElementById('totalDebito').textContent = `$${resumen.debito.toFixed(2)}`;
                    document.getElementById('totalCredito').textContent = `$${resumen.credito.toFixed(2)}`;
                    document.getElementById('totalVale').textContent = `$${resumen.vale.toFixed(2)}`;
                    document.getElementById('totalDia').textContent = `$${resumen.total.toFixed(2)}`;

                    // Agregar las ventas a la tabla detallada
                    const todasVentas = document.getElementById('todasVentas').getElementsByTagName('tbody')[0];
                    todasVentas.innerHTML = ''; // Limpiar las filas existentes
                    ventas.forEach(venta => {
                        const row = todasVentas.insertRow();
                        row.insertCell(0).textContent = venta.sucursal;
                        row.insertCell(1).textContent = venta.ticket;
                        row.insertCell(2).textContent = venta.atendio;
                        row.insertCell(3).textContent = venta.metodoPago;
                        row.insertCell(4).textContent = `$${venta.total.toFixed(2)}`;
                        const detalleCell = row.insertCell(5);
                        const detalleBtn = document.createElement('button');
                        detalleBtn.textContent = 'Ver Detalle';
                        detalleBtn.onclick = () => alert(`Detalle de Venta: ${venta.detalle}`);
                        detalleCell.appendChild(detalleBtn);
                    });
                }

                window.onload = cargarVentas;
            </script>

</body>

</html>