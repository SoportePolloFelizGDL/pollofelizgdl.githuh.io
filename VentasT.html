<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resumen de Ventas</title>
    <link rel="stylesheet" href="VentasStyles.css">
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        /* Configuración principal para alinear los botones en fila */
        .buttons-container {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            /* Alinea los botones a la izquierda */
            gap: 10px;
            /* Espacio entre botones */
        }

        .button-container {
            width: 120px;
            /* Fija un ancho para mantener cada botón en la misma fila */
            text-align: center;
        }

        .button-link {
            display: inline-block;
            text-decoration: none;
        }

        .button-link img {
            width: 100%;
            /* Asegura que las imágenes se ajusten al ancho de los botones */
        }
    </style>
</head>

<body>
    <div class="buttons-container">
        <div class="button-container">
            <a href="Ticket.html" class="button-link">
                <img src="LOGO POLLO O.png" width="80%" alt="TICKET" />
            </a>
        </div>
        <div class="button-container">
            <a href="Ticket didi.html" class="button-link">
                <img src="LOGO DIDI.png" width="80%" alt="DIDI" />
            </a>
        </div>
        <div class="button-container">
            <a href="Ticket rappi.html" class="button-link">
                <img src="LOGO RAPPI.jpg" width="80%" alt="RAPPI" />
            </a>
        </div>
        <div class="button-container">
            <a href="Ticket uber.html" class="button-link">
                <img src="LOGO UBER.png" width="80%" alt="UBER" />
            </a>
        </div>
        <div class="button-container">
            <a href="VentasT.html" class="button-link">
                <img src="LOGO CAJA.png" width="80%" alt="CAJA" />
            </a>
        </div>
    </div>
    <!-- Campo de selección de fecha -->
    <label for="fechaSelect">Seleccionar Fecha:</label>
    <input type="date" id="fechaSelect" onchange="filtrarVentasPorFecha()" />

    <h2>Resumen de Ventas Diarias</h2>

    <table>
        <thead>
            <tr>
                <th>Efectivo</th>
                <th>Débito</th>
                <th>Crédito</th>
                <th>Vale</th>
                <th>Total del Día</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="totalEfectivo">$0.00</td>
                <td id="totalDebito">$0.00</td>
                <td id="totalCredito">$0.00</td>
                <td id="totalVale">$0.00</td>
                <td id="totalDia">$0.00</td>
            </tr>
        </tbody>
    </table>

    <h2>Todas las Ventas</h2>

    <!-- Tabla de Ventas Detalladas -->
    <table id="todasVentas">
        <thead>
            <tr>
                <th>Sucursal</th>
                <th>Fecha y Hora de Venta</th>
                <th>Número de Ticket</th>
                <th>Atendido por</th>
                <th>Método de Pago</th>
                <th>Total</th>
                <th>Detalle</th>
            </tr>
        </thead>
        <tbody>
            <!-- Filas se añadirán aquí -->
        </tbody>
    </table>

    <script>
        function filtrarVentasPorFecha() {
            const fechaSeleccionada = document.getElementById("fechaSelect").value;
            const ventas = JSON.parse(localStorage.getItem("ventas")) || [];

            const resumen = { efectivo: 0, debito: 0, credito: 0, vale: 0, total: 0 };
            const todasVentas = document.getElementById("todasVentas").getElementsByTagName("tbody")[0];
            todasVentas.innerHTML = ""; // Limpiar la tabla

            // Filtrar ventas de la fecha seleccionada
            const ventasFiltradas = ventas.filter(venta => venta.fecha === fechaSeleccionada);

            ventasFiltradas.forEach(venta => {
                switch (venta.metodoPago) {
                    case "efectivo":
                        resumen.efectivo += venta.total;
                        break;
                    case "debito":
                        resumen.debito += venta.total;
                        break;
                    case "credito":
                        resumen.credito += venta.total;
                        break;
                    case "vale":
                        resumen.vale += venta.total;
                        break;
                }
                resumen.total += venta.total;

                // Agregar fila a la tabla detallada
                const row = todasVentas.insertRow();
                row.insertCell(0).textContent = venta.sucursal;
                row.insertCell(1).textContent = `${venta.fecha} ${venta.hora}`;
                row.insertCell(2).textContent = venta.ticket;
                row.insertCell(3).textContent = venta.atendio;
                row.insertCell(4).textContent = venta.metodoPago;
                row.insertCell(5).textContent = `$${venta.total.toFixed(2)}`;
                const detalleCell = row.insertCell(6);
                const detalleBtn = document.createElement("button");
                detalleBtn.textContent = "Ver Detalle";
                detalleBtn.onclick = () => alert(`Detalle de Venta: ${venta.detalle}`);
                detalleCell.appendChild(detalleBtn);
            });

            // Actualizar la tabla resumen
            document.getElementById("totalEfectivo").textContent = `$${resumen.efectivo.toFixed(2)}`;
            document.getElementById("totalDebito").textContent = `$${resumen.debito.toFixed(2)}`;
            document.getElementById("totalCredito").textContent = `$${resumen.credito.toFixed(2)}`;
            document.getElementById("totalVale").textContent = `$${resumen.vale.toFixed(2)}`;
            document.getElementById("totalDia").textContent = `$${resumen.total.toFixed(2)}`;
        }

        // Inicializar la fecha seleccionada con la actual y cargar ventas
        window.onload = () => {
            document.getElementById("fechaSelect").value = new Date().toISOString().split("T")[0];
            filtrarVentasPorFecha();
        };
    </script>

</body>

</html>